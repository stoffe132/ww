<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8">
<title>Dog Clicker</title>
<style>
body{margin:0;background:#111;color:#fff;font-family:Arial;text-align:center}
#count{font-size:40px;margin:20px 0}
#idle{font-size:20px;margin-bottom:10px;color:#ccc}
img{width:300px;cursor:pointer;user-select:none;transition:transform 0.1s}
#upgrades{max-height:600px;overflow-y:auto;margin:10px auto;width:220px;text-align:center}
button{margin:5px;padding:10px 16px;font-size:16px;width:200px;display:block;margin-left:auto;margin-right:auto}
#resetBtn{position:fixed;top:20px;left:20px;width:auto !important;display:inline-block !important;padding:10px 16px;z-index:9999}
</style>
</head>
<body>

<h1>Dog Clicker</h1>
<div id="count">0</div>
<div id="idle">Idle: 0/sek</div>
<img id="dog" src="dog.jpg" alt="dog"><br>
<button id="resetBtn">Radera data</button>
<div id="upgrades"></div>

<audio id="clickSound" src="click.mp3"></audio>
<audio id="buySound" src="buy.mp3"></audio>

<script>
// Hämtar sparade värden eller startvärden med BigInt
let count = BigInt(localStorage.getItem("count") || 0);
let clickPower = BigInt(localStorage.getItem("clickPower") || 1);
let passive = BigInt(localStorage.getItem("passive") || 0);

const countEl = document.getElementById("count");
const idleEl = document.getElementById("idle");
const dog = document.getElementById("dog");
const upgradesContainer = document.getElementById("upgrades");

const clickSound = document.getElementById("clickSound");
const buySound = document.getElementById("buySound");

// Uppgraderingar
let upgrades = [];

// Klickkraft
upgrades.push({
  name: "Klickkraft +1",
  cost: 50n,
  effect: ()=> clickPower += 1n,
  multiplier: 115n
});

// Passiv inkomst
let baseCost = 100n;
let basePassive = 1n; // första uppgradering ger exakt 1/sek
for(let i=0; i<49; i++){
  upgrades.push({
    name: `+${basePassive}/sek`,
    cost: baseCost,
    effect: ()=> passive += basePassive,
    multiplier: 125n
  });
  baseCost = baseCost * 250n / 100n; // pris ökar
  basePassive *= 2n; // multiplicera först nästa iteration
}

// Skapar knappar
upgrades.forEach((u, index)=>{
  let btn = document.createElement("button");
  btn.id = "upgrade"+index;
  btn.textContent = `${u.name} (kostar ${u.cost})`;
  
  btn.addEventListener("click", ()=>{
    if(count >= u.cost){
      count -= u.cost;
      u.effect();
      u.cost = u.cost * u.multiplier / 100n;
      btn.textContent = `${u.name} (kostar ${u.cost})`;
      buySound.play();
      updateDisplay();
      save();
    }
  });
  upgradesContainer.appendChild(btn);
});

// Klick på hunden
dog.addEventListener("click", ()=>{
  count += clickPower;
  clickSound.play();
  dog.style.transform="scale(1.1)";
  setTimeout(()=>dog.style.transform="scale(1)",100);
  updateDisplay();
});

// Passiv inkomst
setInterval(()=>{
  count += passive;
  updateDisplay();
  save();
},1000);

// Reset-knapp
document.getElementById("resetBtn").addEventListener("click", ()=>{
  localStorage.clear();
  location.reload();
});

// Display
function updateDisplay(){
  countEl.textContent = count.toString();
  idleEl.textContent = passive > 0 ? `Idle: ${passive}/sek` : "Ingen passiv inkomst";
}

// Sparfunktion
function save(){
  localStorage.setItem("count", count.toString());
  localStorage.setItem("clickPower", clickPower.toString());
  localStorage.setItem("passive", passive.toString());
}

// Initial uppdatering
updateDisplay();
</script>

</body>
</html>
